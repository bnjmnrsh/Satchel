{"version":3,"file":"Satchel.iife.js","sources":["../src/Satchel.js"],"sourcesContent":["/**\n * A utility library for managaing namespaced sessionStorage and localStorage entries.\n */\nclass Satchel {\n  #pocketKey\n  #store\n  #settings\n\n  /**\n   * @class Satchel\n   * @classdec Create new Satchel instance\n   * @param {string|null} key Storage key\n   * @param {object} cargo The cargo payload to be saved to Storage\n   * @property {object|string} cargo.data The data to be saved, may be string or object\n   * @property {number|null} cargo.expiry The expiry time of the cargo ,may be a number or null\n   * @param {boolean} [local=false] Specify sessionStorage (default) or localStorage\n   * @param {string} [pocket='pocket'] Namespace for Storage keys, default is 'pocket'\n   */\n  constructor(key = null, cargo = {}, local = false, pocket = 'pocket') {\n    this.#store = local ? window.localStorage : window.sessionStorage\n    if (!key) throw new Error('Satchel: a key is required.')\n    if (typeof key !== 'string')\n      throw new Error('Satchel: key must be a string')\n    if (typeof cargo !== 'object')\n      throw new Error('Satchel: cargo must be an object')\n    if (typeof local !== 'boolean')\n      throw new Error('Satchel: local must be true or false')\n    if (typeof pocket !== 'string')\n      throw new Error('Satchel: pocket must be an string')\n\n    this.stcl = Satchel.stcl\n    this.#pocketKey = `${this.stcl}.${pocket}.${key}`\n    this.#settings = { data: undefined, expiry: null }\n\n    cargo = { ...this.#settings, ...cargo }\n\n    // Set the cargo to Storage\n    this.set(cargo)\n  }\n\n  /**\n   * Returns an object of age and freshness related data\n   *\n   * @typedef {object} age object\n   * @property {number} age in milliseconds\n   * @property {number} creation Date.now() (ms)src/Satchel.js\n   * @property {boolean} fresh if Store key is fresh\n   * @return {Age} An age object representing the age of the current Store key.\n   */\n  age() {\n    const store = JSON.parse(this.#store.getItem(this.#pocketKey))\n    return {\n      age: Number(Date.now() - store.creation),\n      creation: store.creation ? Number(store.creation) : null,\n      expiry: store.expiry ? Number(store.expiry) : null,\n      fresh: Boolean(this.isFresh())\n    }\n  }\n\n  /**\n   * Remove the current namespaced key from the store.\n   *\n   * @returns {boolian:true | null } Returns true on sucess\n   */\n  bin() {\n    const item = this.#store.getItem(this.#pocketKey)\n    this.#store.removeItem(this.#pocketKey)\n    if (!this.#store.getItem(this.#pocketKey)) {\n      Satchel.#emit({\n        key: String(this.#pocketKey),\n        oldValue: String(item),\n        storageArea: String(Satchel.#storageAreaString(this.#store)),\n        action: 'bin'\n      })\n      return true\n    }\n  }\n\n  /**\n   * Get the data for the current Storage key.\n   *\n   * @param {boolean} ignoreStale flag to ignore stale entries from a \"pocket\"\n   * @returns\n   */\n  get(ignoreStale = false) {\n    const item = this.#store.getItem(this.#pocketKey)\n    if (!item) return false\n    if ((this.isFresh() && !ignoreStale) || ignoreStale) {\n      return JSON.parse(item)\n    }\n    return false\n  }\n\n  /**\n   * Sets the data, for a given key and namespace\n   *\n   * @param {object} settings object\n   * @property {object|string} data the Storage object to set\n   * @property {number|null} expiry the expiery date in (ms)\n   * @property {number} creation the creation date in (ms) Date.now()\n   *\n   * @return {Object} Satchel\n   */\n  set({ data, expiry }) {\n    if (typeof expiry !== 'number' && expiry !== null) {\n      throw new Error('Satchel: Expiry must be null or a number.')\n    }\n    if (\n      typeof data !== 'string' &&\n      typeof data !== 'object' &&\n      data !== undefined\n    ) {\n      console.warn(typeof data)\n      throw new Error('Satchel: Data must be a string or an object.')\n    }\n    const storedEntry = this.get(true)\n    const temp = {}\n    temp.data = data || null\n    temp.expiry = expiry || null\n\n    if (!data && !expiry && storedEntry)\n      throw new Error(\n        `Satchel: The key (\"${\n          this.#pocketKey\n        }\") already exists in ${Satchel.#storageAreaString(\n          this.#store\n        )}, and \"data\" and \"expiry\" atributes have not been set, set these or create a new unique key.`\n      )\n\n    // dont overwrite existing creation time\n    temp.creation = Number(storedEntry.creation) || Date.now()\n    // Set storage values\n    this.#store.setItem(this.#pocketKey, JSON.stringify(temp))\n\n    Satchel.#emit({\n      key: String(this.#pocketKey),\n      newValue: JSON.stringify(temp),\n      oldValue: storedEntry ? JSON.stringify(storedEntry) : null,\n      storageArea: String(Satchel.#storageAreaString(this.#store)),\n      action: 'set'\n    })\n    return this\n  }\n\n  /**\n   * Check if current item is fresh.\n   *\n   * @returns {boolean} true if the item has not expired\n   */\n  isFresh() {\n    const store = JSON.parse(this.#store.getItem(this.#pocketKey))\n    return Boolean(!store?.expiry ? true : store.expiry - Date.now() > 0)\n  }\n\n  /**\n   * Returns the current namespaced Store key (pocket.key), the key is prefixed with 'stcl'\n   *\n   * @returns {string} the key to the current pocket-key\n   */\n  getKey() {\n    return String(this.#pocketKey)\n  }\n\n  /**\n   * Returns array of keys for a 'Pocket' namespace.\n   *\n   * @param {string} pocket namespace prefix, default 'pocket'\n   * @param {boolean} local specify sessionStorage (default) or localStorage\n   * @returns {array} array of Storage keys for the current pocket.\n   */\n  static getAllPocketKeys(pocket = 'pocket', local = false) {\n    const store = local ? window.localStorage : window.sessionStorage\n\n    const allKeys = Object.keys(store)\n      .map((key) => {\n        return key.startsWith(this.stcl + '.' + pocket) ? key : ''\n      })\n      .filter((e) => {\n        return e\n      })\n\n    return Array.from(allKeys)\n  }\n\n  /**\n   * Get the Storage type as a string 'localStorage' or 'sessionStorage'\n   *\n   * @param {object} Storage object\n   * @returns {string} the Storage type as a string 'localStorage' or 'SessionStorage'\n   */\n  static #storageAreaString(store) {\n    return store === localStorage ? 'LocalStorage' : 'SessionStorage'\n  }\n\n  /**\n   * Emulates the StorageEvent API, which may be preferable for some use cases.\n   * https://developer.mozilla.org/en-US/docs/Web/API/StorageEvent\n   *\n   * Emit custom events for Satchel\n   * @typedef {CustomEvent}\n   * @param {object} detail Event details\n   * @property {string|null} detail.key name of the Storage key being called\n   * @property {string|null} detail.pocket name of the Storage pocket being cleaned\n   * @property {string|null} detail.newValue the updated value of the Storage key\n   * @property {string|null} detail.oldValue the old value of the Storage key\n   * @property {number|null} detail.keysBefore then number of keys in the pocket before emptyPocket or tidyPocket\n   * @property {number|null} detail.keysAfter then number of keys in the pocket after emptyPocket or tidyPocket\n   * @property {string} detail.storageArea, the type of Storage object\n   * @property {string} detail.url, the url of the document whoes key changed\n   * @property {string} detail.action the name of the Satchel function emiting the event\n   * @property {boolean} [pocketClean = false] Optional flag to indiacte a emptyPocket or tidyPocket opperation.\n   * @returns {CustomEvent} CustomEvent\n   */\n  static #emit(detail = {}, pocketClean = false) {\n    let required = {\n      key: null,\n      newValue: null,\n      oldValue: null,\n      storageArea: null,\n      url: String(window.location.href) || null,\n      action: null\n    }\n    if (pocketClean) {\n      required = {\n        pocket: null,\n        keysBefore: null,\n        keysRemaining: null,\n        storageArea: null,\n        url: String(window.location.href) || null,\n        action: null\n      }\n    }\n    detail = { ...required, ...detail }\n    const event = new CustomEvent('Satchel', {\n      bubbles: true,\n      cancelable: true,\n      detail\n    })\n    return document.dispatchEvent(event)\n  }\n\n  /**\n   * Clears all items regardless of freshness from a given 'pocket' namespace\n   *\n   * @param {string} pocket namespace prefix, default 'pocket'\n   * @param {boolean} local specify sessionStorage (default) or localStorage\n   * @returns {array} The number of items remaing in store, which if sucessful should be 0.\n   */\n  static emptyPocket(pocket = 'pocket', local = false) {\n    const store = local ? window.localStorage : window.sessionStorage\n    const keysBefore = Satchel.getAllPocketKeys(pocket, local)\n    if (!keysBefore.length) {\n      console.warn('No pocket keys found for ' + pocket + ' in ' + store)\n      return keysBefore\n    }\n\n    Object.keys(keysBefore).forEach((key) => {\n      store.removeItem(keysBefore[key])\n    })\n    const keysRemaining = Satchel.getAllPocketKeys(pocket, local).length\n\n    Satchel.#emit(\n      {\n        pocket: pocket,\n        keysBefore: keysBefore.length,\n        keysRemaining,\n        storageArea: Satchel.#storageAreaString(store),\n        action: 'emptyPocket'\n      },\n      true\n    )\n\n    return keysRemaining\n  }\n\n  /**\n   *  Removes all expired items from a given 'pocket' namespace\n   *\n   * @param {string} pocket namespace prefix, default 'pocket'\n   * @param {boolean} local specify sessionStorage (default) or localStorage\n   * @returns The number of items remaing in store that have yet to expire.\n   */\n  static tidyPocket(pocket = 'pocket', local = false) {\n    const store = local ? localStorage : sessionStorage\n    const keysBefore = Satchel.getAllPocketKeys(pocket, local)\n    if (!keysBefore.length) return null\n\n    Object.keys(keysBefore).forEach((key) => {\n      const expiry = JSON.parse(store.getItem(keysBefore[key])).expiry\n      if (!expiry || expiry - Date.now() > 0) return null\n      store.removeItem(keysBefore[key])\n    })\n    const keysRemaining = Satchel.getAllPocketKeys(pocket, local).length\n\n    Satchel.#emit(\n      {\n        pocket: String(pocket),\n        keysBefore: Number(keysBefore.length),\n        keysRemaining: Number(keysRemaining),\n        storageArea: String(Satchel.#storageAreaString(store)),\n        action: 'tidyPocket'\n      },\n      true\n    )\n    return keysRemaining\n  }\n\n  /**\n   * Returns an instance of Satchel associated with the given key, pocket,store, or false if none is found.\n   *\n   * @param {string} key key for the stored item\n   * @param {string} [pocket='pocket'] namespace prefix, default 'pocket'\n   * @param {string} [local='false'] specify sessionStorage (default) or localStorage\n   * @returns {Satchel|false} new Satchel instance | false\n   */\n  static getSatchel(key, pocket = 'pocket', local = false) {\n    if (!key) throw new Error('Satchel: a key is required.')\n    if (typeof key !== 'string')\n      throw new Error('Satchel: key must be a string')\n    if (typeof pocket !== 'string')\n      throw new Error('Satchel: pocket must be an string')\n    if (typeof local !== 'boolean')\n      throw new Error('Satchel: local must be true or false')\n\n    const pocketKey = `${Satchel.stcl}.${pocket}.${key}`\n    const store = local ? localStorage : sessionStorage\n    const item = JSON.parse(store.getItem(pocketKey))\n    if (!item) return false\n\n    return new Satchel(key, item, local, pocket)\n  }\n}\n\nSatchel.stcl = 'stcl'\nexport { Satchel }\n"],"names":[],"mappings":";;;;;EAAA;EACA;EACA;EACA,MAAM,OAAO,CAAC;EACd,EAAE,UAAU;EACZ,EAAE,MAAM;EACR,EAAE,SAAS;AACX;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,EAAE,WAAW,CAAC,GAAG,GAAG,IAAI,EAAE,KAAK,GAAG,EAAE,EAAE,KAAK,GAAG,KAAK,EAAE,MAAM,GAAG,QAAQ,EAAE;EACxE,IAAI,IAAI,CAAC,MAAM,GAAG,KAAK,GAAG,MAAM,CAAC,YAAY,GAAG,MAAM,CAAC,eAAc;EACrE,IAAI,IAAI,CAAC,GAAG,EAAE,MAAM,IAAI,KAAK,CAAC,6BAA6B,CAAC;EAC5D,IAAI,IAAI,OAAO,GAAG,KAAK,QAAQ;EAC/B,MAAM,MAAM,IAAI,KAAK,CAAC,+BAA+B,CAAC;EACtD,IAAI,IAAI,OAAO,KAAK,KAAK,QAAQ;EACjC,MAAM,MAAM,IAAI,KAAK,CAAC,kCAAkC,CAAC;EACzD,IAAI,IAAI,OAAO,KAAK,KAAK,SAAS;EAClC,MAAM,MAAM,IAAI,KAAK,CAAC,sCAAsC,CAAC;EAC7D,IAAI,IAAI,OAAO,MAAM,KAAK,QAAQ;EAClC,MAAM,MAAM,IAAI,KAAK,CAAC,mCAAmC,CAAC;AAC1D;EACA,IAAI,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,KAAI;EAC5B,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,GAAG,CAAC,EAAC;EACrD,IAAI,IAAI,CAAC,SAAS,GAAG,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE,IAAI,GAAE;AACtD;EACA,IAAI,KAAK,GAAG,EAAE,GAAG,IAAI,CAAC,SAAS,EAAE,GAAG,KAAK,GAAE;AAC3C;EACA;EACA,IAAI,IAAI,CAAC,GAAG,CAAC,KAAK,EAAC;EACnB,GAAG;AACH;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,EAAE,GAAG,GAAG;EACR,IAAI,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,EAAC;EAClE,IAAI,OAAO;EACX,MAAM,GAAG,EAAE,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,KAAK,CAAC,QAAQ,CAAC;EAC9C,MAAM,QAAQ,EAAE,KAAK,CAAC,QAAQ,GAAG,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,IAAI;EAC9D,MAAM,MAAM,EAAE,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,IAAI;EACxD,MAAM,KAAK,EAAE,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;EACpC,KAAK;EACL,GAAG;AACH;EACA;EACA;EACA;EACA;EACA;EACA,EAAE,GAAG,GAAG;EACR,IAAI,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,EAAC;EACrD,IAAI,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,EAAC;EAC3C,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;EAC/C,MAAM,OAAO,CAAC,KAAK,CAAC;EACpB,QAAQ,GAAG,EAAE,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;EACpC,QAAQ,QAAQ,EAAE,MAAM,CAAC,IAAI,CAAC;EAC9B,QAAQ,WAAW,EAAE,MAAM,CAAC,OAAO,CAAC,kBAAkB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;EACpE,QAAQ,MAAM,EAAE,KAAK;EACrB,OAAO,EAAC;EACR,MAAM,OAAO,IAAI;EACjB,KAAK;EACL,GAAG;AACH;EACA;EACA;EACA;EACA;EACA;EACA;EACA,EAAE,GAAG,CAAC,WAAW,GAAG,KAAK,EAAE;EAC3B,IAAI,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,EAAC;EACrD,IAAI,IAAI,CAAC,IAAI,EAAE,OAAO,KAAK;EAC3B,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,KAAK,WAAW,EAAE;EACzD,MAAM,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;EAC7B,KAAK;EACL,IAAI,OAAO,KAAK;EAChB,GAAG;AACH;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,EAAE,GAAG,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE;EACxB,IAAI,IAAI,OAAO,MAAM,KAAK,QAAQ,IAAI,MAAM,KAAK,IAAI,EAAE;EACvD,MAAM,MAAM,IAAI,KAAK,CAAC,2CAA2C,CAAC;EAClE,KAAK;EACL,IAAI;EACJ,MAAM,OAAO,IAAI,KAAK,QAAQ;EAC9B,MAAM,OAAO,IAAI,KAAK,QAAQ;EAC9B,MAAM,IAAI,KAAK,SAAS;EACxB,MAAM;EACN,MAAM,OAAO,CAAC,IAAI,CAAC,OAAO,IAAI,EAAC;EAC/B,MAAM,MAAM,IAAI,KAAK,CAAC,8CAA8C,CAAC;EACrE,KAAK;EACL,IAAI,MAAM,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAC;EACtC,IAAI,MAAM,IAAI,GAAG,GAAE;EACnB,IAAI,IAAI,CAAC,IAAI,GAAG,IAAI,IAAI,KAAI;EAC5B,IAAI,IAAI,CAAC,MAAM,GAAG,MAAM,IAAI,KAAI;AAChC;EACA,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,IAAI,WAAW;EACvC,MAAM,MAAM,IAAI,KAAK;EACrB,QAAQ,CAAC,mBAAmB;AAC5B,UAAU,IAAI,CAAC,UAAU;AACzB,SAAS,qBAAqB,EAAE,OAAO,CAAC,kBAAkB;AAC1D,UAAU,IAAI,CAAC,MAAM;AACrB,SAAS,CAAC,4FAA4F,CAAC;EACvG,OAAO;AACP;EACA;EACA,IAAI,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,GAAG,GAAE;EAC9D;EACA,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAC;AAC9D;EACA,IAAI,OAAO,CAAC,KAAK,CAAC;EAClB,MAAM,GAAG,EAAE,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;EAClC,MAAM,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;EACpC,MAAM,QAAQ,EAAE,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,GAAG,IAAI;EAChE,MAAM,WAAW,EAAE,MAAM,CAAC,OAAO,CAAC,kBAAkB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;EAClE,MAAM,MAAM,EAAE,KAAK;EACnB,KAAK,EAAC;EACN,IAAI,OAAO,IAAI;EACf,GAAG;AACH;EACA;EACA;EACA;EACA;EACA;EACA,EAAE,OAAO,GAAG;EACZ,IAAI,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,EAAC;EAClE,IAAI,OAAO,OAAO,CAAC,CAAC,KAAK,EAAE,MAAM,GAAG,IAAI,GAAG,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;EACzE,GAAG;AACH;EACA;EACA;EACA;EACA;EACA;EACA,EAAE,MAAM,GAAG;EACX,IAAI,OAAO,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;EAClC,GAAG;AACH;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,EAAE,OAAO,gBAAgB,CAAC,MAAM,GAAG,QAAQ,EAAE,KAAK,GAAG,KAAK,EAAE;EAC5D,IAAI,MAAM,KAAK,GAAG,KAAK,GAAG,MAAM,CAAC,YAAY,GAAG,MAAM,CAAC,eAAc;AACrE;EACA,IAAI,MAAM,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;EACtC,OAAO,GAAG,CAAC,CAAC,GAAG,KAAK;EACpB,QAAQ,OAAO,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,GAAG,GAAG,GAAG,MAAM,CAAC,GAAG,GAAG,GAAG,EAAE;EAClE,OAAO,CAAC;EACR,OAAO,MAAM,CAAC,CAAC,CAAC,KAAK;EACrB,QAAQ,OAAO,CAAC;EAChB,OAAO,EAAC;AACR;EACA,IAAI,OAAO,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC;EAC9B,GAAG;AACH;EACA;EACA;EACA;EACA;EACA;EACA;EACA,EAAE,OAAO,kBAAkB,CAAC,KAAK,EAAE;EACnC,IAAI,OAAO,KAAK,KAAK,YAAY,GAAG,cAAc,GAAG,gBAAgB;EACrE,GAAG;AACH;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,EAAE,OAAO,KAAK,CAAC,MAAM,GAAG,EAAE,EAAE,WAAW,GAAG,KAAK,EAAE;EACjD,IAAI,IAAI,QAAQ,GAAG;EACnB,MAAM,GAAG,EAAE,IAAI;EACf,MAAM,QAAQ,EAAE,IAAI;EACpB,MAAM,QAAQ,EAAE,IAAI;EACpB,MAAM,WAAW,EAAE,IAAI;EACvB,MAAM,GAAG,EAAE,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,IAAI;EAC/C,MAAM,MAAM,EAAE,IAAI;EAClB,MAAK;EACL,IAAI,IAAI,WAAW,EAAE;EACrB,MAAM,QAAQ,GAAG;EACjB,QAAQ,MAAM,EAAE,IAAI;EACpB,QAAQ,UAAU,EAAE,IAAI;EACxB,QAAQ,aAAa,EAAE,IAAI;EAC3B,QAAQ,WAAW,EAAE,IAAI;EACzB,QAAQ,GAAG,EAAE,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,IAAI;EACjD,QAAQ,MAAM,EAAE,IAAI;EACpB,QAAO;EACP,KAAK;EACL,IAAI,MAAM,GAAG,EAAE,GAAG,QAAQ,EAAE,GAAG,MAAM,GAAE;EACvC,IAAI,MAAM,KAAK,GAAG,IAAI,WAAW,CAAC,SAAS,EAAE;EAC7C,MAAM,OAAO,EAAE,IAAI;EACnB,MAAM,UAAU,EAAE,IAAI;EACtB,MAAM,MAAM;EACZ,KAAK,EAAC;EACN,IAAI,OAAO,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;EACxC,GAAG;AACH;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,EAAE,OAAO,WAAW,CAAC,MAAM,GAAG,QAAQ,EAAE,KAAK,GAAG,KAAK,EAAE;EACvD,IAAI,MAAM,KAAK,GAAG,KAAK,GAAG,MAAM,CAAC,YAAY,GAAG,MAAM,CAAC,eAAc;EACrE,IAAI,MAAM,UAAU,GAAG,OAAO,CAAC,gBAAgB,CAAC,MAAM,EAAE,KAAK,EAAC;EAC9D,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE;EAC5B,MAAM,OAAO,CAAC,IAAI,CAAC,2BAA2B,GAAG,MAAM,GAAG,MAAM,GAAG,KAAK,EAAC;EACzE,MAAM,OAAO,UAAU;EACvB,KAAK;AACL;EACA,IAAI,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,CAAC,GAAG,KAAK;EAC7C,MAAM,KAAK,CAAC,UAAU,CAAC,UAAU,CAAC,GAAG,CAAC,EAAC;EACvC,KAAK,EAAC;EACN,IAAI,MAAM,aAAa,GAAG,OAAO,CAAC,gBAAgB,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC,OAAM;AACxE;EACA,IAAI,OAAO,CAAC,KAAK;EACjB,MAAM;EACN,QAAQ,MAAM,EAAE,MAAM;EACtB,QAAQ,UAAU,EAAE,UAAU,CAAC,MAAM;EACrC,QAAQ,aAAa;EACrB,QAAQ,WAAW,EAAE,OAAO,CAAC,kBAAkB,CAAC,KAAK,CAAC;EACtD,QAAQ,MAAM,EAAE,aAAa;EAC7B,OAAO;EACP,MAAM,IAAI;EACV,MAAK;AACL;EACA,IAAI,OAAO,aAAa;EACxB,GAAG;AACH;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,EAAE,OAAO,UAAU,CAAC,MAAM,GAAG,QAAQ,EAAE,KAAK,GAAG,KAAK,EAAE;EACtD,IAAI,MAAM,KAAK,GAAG,KAAK,GAAG,YAAY,GAAG,eAAc;EACvD,IAAI,MAAM,UAAU,GAAG,OAAO,CAAC,gBAAgB,CAAC,MAAM,EAAE,KAAK,EAAC;EAC9D,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,OAAO,IAAI;AACvC;EACA,IAAI,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,CAAC,GAAG,KAAK;EAC7C,MAAM,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,OAAM;EACtE,MAAM,IAAI,CAAC,MAAM,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,OAAO,IAAI;EACzD,MAAM,KAAK,CAAC,UAAU,CAAC,UAAU,CAAC,GAAG,CAAC,EAAC;EACvC,KAAK,EAAC;EACN,IAAI,MAAM,aAAa,GAAG,OAAO,CAAC,gBAAgB,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC,OAAM;AACxE;EACA,IAAI,OAAO,CAAC,KAAK;EACjB,MAAM;EACN,QAAQ,MAAM,EAAE,MAAM,CAAC,MAAM,CAAC;EAC9B,QAAQ,UAAU,EAAE,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC;EAC7C,QAAQ,aAAa,EAAE,MAAM,CAAC,aAAa,CAAC;EAC5C,QAAQ,WAAW,EAAE,MAAM,CAAC,OAAO,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;EAC9D,QAAQ,MAAM,EAAE,YAAY;EAC5B,OAAO;EACP,MAAM,IAAI;EACV,MAAK;EACL,IAAI,OAAO,aAAa;EACxB,GAAG;AACH;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,EAAE,OAAO,UAAU,CAAC,GAAG,EAAE,MAAM,GAAG,QAAQ,EAAE,KAAK,GAAG,KAAK,EAAE;EAC3D,IAAI,IAAI,CAAC,GAAG,EAAE,MAAM,IAAI,KAAK,CAAC,6BAA6B,CAAC;EAC5D,IAAI,IAAI,OAAO,GAAG,KAAK,QAAQ;EAC/B,MAAM,MAAM,IAAI,KAAK,CAAC,+BAA+B,CAAC;EACtD,IAAI,IAAI,OAAO,MAAM,KAAK,QAAQ;EAClC,MAAM,MAAM,IAAI,KAAK,CAAC,mCAAmC,CAAC;EAC1D,IAAI,IAAI,OAAO,KAAK,KAAK,SAAS;EAClC,MAAM,MAAM,IAAI,KAAK,CAAC,sCAAsC,CAAC;AAC7D;EACA,IAAI,MAAM,SAAS,GAAG,CAAC,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,GAAG,CAAC,EAAC;EACxD,IAAI,MAAM,KAAK,GAAG,KAAK,GAAG,YAAY,GAAG,eAAc;EACvD,IAAI,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,EAAC;EACrD,IAAI,IAAI,CAAC,IAAI,EAAE,OAAO,KAAK;AAC3B;EACA,IAAI,OAAO,IAAI,OAAO,CAAC,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,CAAC;EAChD,GAAG;EACH,CAAC;AACD;EACA,OAAO,CAAC,IAAI,GAAG;;;;;;;;;;;;"}